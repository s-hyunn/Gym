<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ë‚˜ì˜ ë¬¸ì˜ ë‚´ì—­</title>
  <link rel="stylesheet" type="text/css" href="/style.css">
</head>
<body>
  <div class="container">
    <h2>ğŸ“‹ ë‚˜ì˜ ë¬¸ì˜ ë‚´ì—­</h2>

    <div class="btn-container">
      <a th:href="@{/writeQna}" class="btn">ë¬¸ì˜í•˜ê¸°</a>
    </div>

    <table>
      <thead>
        <tr>
          <th>ë²ˆí˜¸</th>
          <th>ì‘ì„±ì</th>
          <th>ì œëª©</th>
          <th>ë‚´ìš©</th>
          <th>ìƒíƒœ</th>
          <th>ì‘ì„±ì¼</th>
        </tr>
      </thead>
      <tbody th:if="${qnaList != null}">
        <tr th:each="qna, iterStat : ${qnaList}">
          <td th:text="${qna.qno}">1</td>
          <td th:text="${qna.user.id}">ì‘ì„±ì</td>
          <td th:text="${qna.title}">ì œëª©</td>
          <td th:text="${qna.content}">ë‚´ìš©</td>
          <td>
            <span th:if="${qna.status != 'ë‹µë³€ì™„ë£Œ'}" th:text="${qna.status}">ìƒíƒœ</span>
            <a th:if="${qna.status == 'ë‹µë³€ì™„ë£Œ'}"
               href="javascript:void(0);"
               th:onclick="'toggleAnswer(' + ${iterStat.index} + ');'"
               class="answer-toggle">ë‹µë³€ë³´ê¸°</a>
          </td>
          <td th:text="${#temporals.format(qna.createdAt, 'yyyy-MM-dd HH:mm')}">ì‘ì„±ì¼</td>
        </tr>
        <tr th:each="qna, iterStat : ${qnaList}" th:if="${qna.status == 'ë‹µë³€ì™„ë£Œ'}"
            th:id="'answerRow-' + ${iterStat.index}" class="answer-row">
          <td colspan="6">
            <strong>ë‹µë³€:</strong>
            <div th:text="${qna.answer}">ë‹µë³€ ë‚´ìš©</div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <script>
    function toggleAnswer(index) {
      const row = document.getElementById("answerRow-" + index);
      if (row) {
        row.style.display = (row.style.display === "none" || row.style.display === "") ? "table-row" : "none";
      }
    }
  </script>
</body>
</html>
